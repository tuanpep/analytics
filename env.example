# Plausible Analytics Environment Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Your domain or IP address (REQUIRED)
BASE_URL=https://your-domain.com

# Secret key for session encryption (REQUIRED - generate with: openssl rand -base64 64)
SECRET_KEY_BASE=your-secret-key-base-here

# TOTP vault key for 2FA (generate with: openssl rand -base64 32)
TOTP_VAULT_KEY=your-totp-vault-key-here

# Environment
ENVIRONMENT=prod

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database URL
DATABASE_URL=postgres://plausible:plausible@postgres:5432/plausible

# ClickHouse Database URL
CLICKHOUSE_DATABASE_URL=http://clickhouse:8123/plausible?user=default&password=

# ClickHouse Configuration
CLICKHOUSE_MAX_BUFFER_SIZE_BYTES=100000
CLICKHOUSE_FLUSH_INTERVAL_MS=5000
CLICKHOUSE_INGEST_POOL_SIZE=5

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server settings
PORT=8000
LISTEN_IP=0.0.0.0
SECURE_COOKIE=true

# Logging
LOG_LEVEL=notice
LOG_FORMAT=standard

# =============================================================================
# USER MANAGEMENT
# =============================================================================

# Admin user IDs (comma-separated)
ADMIN_USER_IDS=1

# Registration settings
DISABLE_REGISTRATION=false

# Email verification
ENABLE_EMAIL_VERIFICATION=false

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================

# Email adapter
MAILER_ADAPTER=Bamboo.LocalAdapter

# =============================================================================
# GEOLOCATION CONFIGURATION
# =============================================================================

# MaxMind License Key (for GeoLite2 database)
# MAXMIND_LICENSE_KEY=your-maxmind-license-key

# =============================================================================
# MONITORING & ANALYTICS (Optional)
# =============================================================================

# Sentry for error tracking
# SENTRY_DSN=your-sentry-dsn

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Self-hosted mode
SELFHOST=true

# Disable cron jobs
DISABLE_CRON=false

# Session timeout (in minutes)
SESSION_LENGTH_MINUTES=30

# Custom script name
CUSTOM_SCRIPT_NAME=script

# Log failed login attempts
LOG_FAILED_LOGIN_ATTEMPTS=false

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# OpenTelemetry sampler ratio
OTEL_SAMPLER_RATIO=0.1

# Import buffer size
IMPORTED_MAX_BUFFER_SIZE=10000

# =============================================================================
# SECURITY
# =============================================================================

# Enable session transfer
ENABLE_SESSION_TRANSFER=true